<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <script src="html2canvas.min.js"></script>
  <style>
    body {
      width: 380px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f7f6;
      color: #333;
    }
    #capture-area { padding: 20px; background-color: #f4f7f6; position: relative; }

    /* „Éò„ÉÉ„ÉÄ„Éº */
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .app-title { font-size: 18px; font-weight: 800; color: #2c3e50; display: flex; align-items: center; gap: 8px; }
    .header-icons { display: flex; gap: 12px; }
    .icon-btn { cursor: pointer; font-size: 18px; background: none; border: none; padding: 0; color: #95a5a6; transition: color 0.3s; }
    .icon-btn:hover { color: #2980b9; }

    /* „Ç´„Éº„Éâ */
    .card { background: white; border-radius: 12px; padding: 12px; margin-bottom: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

    /* „Éê„Ç∏„Çß„ÉÉ„ÉàÔºàÁõÆÊ®ôÔºâ„Éê„Éº */
    .budget-container { margin-bottom: 15px; }
    .budget-header { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 5px; color: #555; font-weight: bold; }
    .progress-bg { background: #e0e0e0; border-radius: 10px; height: 10px; overflow: hidden; width: 100%; }
    #budget-bar { width: 0%; height: 100%; background: linear-gradient(90deg, #2ecc71, #27ae60); transition: width 0.5s ease; }

    /* Ë≤¢ÁåÆÂ∫¶ */
    .contribution { background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white; text-align: center; }
    .contribution .val { font-size: 24px; font-weight: bold; }
    .contribution .sub { font-size: 10px; opacity: 0.9; margin-top: 5px; }

    /* „Ç∞„É©„Éï */
    .graph-container {
      display: flex;
      align-items: flex-end;
      justify-content: space-between;
      height: 80px;
      padding-top: 10px;
      padding-bottom: 5px;
    }
    .bar-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      width: 12%;
    }
    .bar {
      width: 100%;
      background-color: #3498db;
      border-radius: 4px 4px 0 0;
      transition: height 0.5s ease;
      min-height: 2px;
    }
    .bar-label { font-size: 9px; color: #7f8c8d; margin-top: 4px; }
    .today-bar { background-color: #e74c3c; } 

    /* „Ç∞„É™„ÉÉ„Éâ„Å®„ÉÜ„Ç≠„Çπ„Éà */
    .grid-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px; }
    .label { font-size: 10px; text-transform: uppercase; color: #7f8c8d; font-weight: 600; }
    .value { font-size: 18px; font-weight: 800; color: #2c3e50; }
    .unit { font-size: 10px; color: #999; font-weight: normal; }
    .cost-val { color: #e74c3c; }
    .price-sub { font-size: 11px; color: #95a5a6; font-weight: bold; display: block; margin-top: 2px; }

    /* „Éú„Çø„É≥ */
    .actions { padding: 0 20px 20px; display: flex; gap: 10px; }
    button.action-btn { flex: 1; padding: 10px; border: none; border-radius: 8px; cursor: pointer; font-size: 12px; font-weight: bold; }
    .btn-share { background: #2c3e50; color: white; }
    .btn-reset { background: #ecf0f1; color: #7f8c8d; }
  </style>
</head>
<body>

  <div id="capture-area">
    <div class="header">
      <div class="app-title"><span>ü§ñ</span> AI Eco Monitor</div>
      <div class="header-icons" data-html2canvas-ignore="true">
        <button id="reload-btn" class="icon-btn">‚Üª</button>
        <button id="settings-btn" class="icon-btn">‚öôÔ∏è</button>
      </div>
    </div>

    <!-- „Ç®„Ç≥„Éª„Éê„Ç∏„Çß„ÉÉ„Éà (Ê©üËÉΩ2) -->
    <div class="card budget-container">
      <div class="budget-header">
        <span>TODAY'S BUDGET (CO2)</span>
        <span><span id="budget-percent">0</span>% USED</span>
      </div>
      <div class="progress-bg">
        <div id="budget-bar"></div>
      </div>
      <div style="font-size:9px; color:#999; text-align:right; margin-top:4px;">
        Target: <span id="budget-limit-val">10</span>g
      </div>
    </div>

    <!-- Êó•Ê¨°„Ç®„Ç≥„Éª„Ç∞„É©„Éï (Ê©üËÉΩ1) -->
    <div class="card">
      <div class="label">Daily Activity (Last 7 Days)</div>
      <div class="graph-container" id="daily-graph">
        <!-- JS„Åß„Éê„Éº„ÇíÁîüÊàê -->
      </div>
    </div>

    <!-- Ë≤¢ÁåÆÂ∫¶ -->
    <div class="card contribution">
      <div class="label" style="color:white">Waste Avoided</div>
      <div class="val"><span id="avoided-count">0</span> <span style="font-size:14px">Times</span></div>
      <div class="sub">Saved: <span id="saved-co2">0</span> kg-CO2</div>
    </div>

    <!-- Áµ±Ë®à„Ç∞„É™„ÉÉ„Éâ 1ÊÆµÁõÆ -->
    <div class="grid-row">
      <div class="card">
        <div class="label">Carbon Footprint</div>
        <div class="value cost-val"><span id="co2-cost">0</span><span class="unit">kg</span></div>
        <div id="metaphor-text" style="font-size:9px; margin-top:5px; color:#555; background:#f9f9f9; padding:4px;"></div>
      </div>
      <div class="card">
        <div class="label">Total Req/Tok</div>
        <div style="font-size:14px; font-weight:bold;"><span id="req-count">0</span> Req</div>
        <div style="font-size:12px; color:#7f8c8d;"><span id="token-count">0</span> Tok</div>
      </div>
    </div>

    <!-- Áµ±Ë®à„Ç∞„É™„ÉÉ„Éâ 2ÊÆµÁõÆ (Âæ©Ê¥ªÔºÅÊ∞¥„Å®ÈõªÊ∞ó) -->
    <div class="grid-row" style="margin-bottom:0;">
      <div class="card">
        <div class="label">üíß Water</div>
        <div class="value"><span id="water-cost">0</span><span class="unit">L</span></div>
        <span class="price-sub">¬•<span id="water-price">0</span></span>
      </div>
      <div class="card">
        <div class="label">‚ö° Electricity</div>
        <div class="value"><span id="elec-cost">0</span><span class="unit">Wh</span></div>
        <span class="price-sub">¬•<span id="elec-price">0</span></span>
      </div>
    </div>

    <div style="text-align:center; font-size:9px; color:#ccc; margin-top:10px;">Generated by AI Eco Monitor</div>
  </div>

  <div class="actions">
    <button id="share-btn" class="action-btn btn-share">üì∑ ÁîªÂÉè‰øùÂ≠ò</button>
    <button id="reset-btn" class="action-btn btn-reset">„É™„Çª„ÉÉ„Éà</button>
  </div>

  <script src="popup.js"></script>
</body>
</html>